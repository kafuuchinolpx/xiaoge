<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>泉水订单确认个人信息</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<script src="js/pei_zhi.js"></script>
		<script src="js/vue.js"></script>
		<script src="js/jquery.min.js"></script>
		<script src="js/mui.js"></script>
		<style>
			body {
            margin: 0;
            padding: 0;
        }

        p {
            margin: 25px auto;
        }

        .styles {
            position: relative;
        }

        .styles input {
            position: absolute;
            width: 60%;
            left: 125px;
            border-radius: 3px;
            background-color: darkgray;
        }

    </style>
	</head>
	<body style="background: #000;">
		<div style="background: white;"><img src="bmp/log1.jpg" width="100%"></div>
		<div style="margin-left: 10px;margin-right: 10px;color: white;" id="app">

			<p style="color: #00ff00;">用户专用泉水图片上传 </p>

			<input type="file" style="background: #666;width:100%;background-color:#aaa;" name="logo" />
			<br>
			<div class="styles">
				<p style="position: relative;">收货地址：
					<input type="text" v-model="user.address" />
				</p>

				<p style="position: relative;">收件人：
					<input type="text" v-model="user.userName" />
				</p>

				<p style="position: relative;">电话：
					<input type="number" v-model="user.telephone" />
				</p>

				<p style="position: relative;">下单数量(件)：
					<input type="number" v-model="user.count" />
				</p>
				<p> 单位:（件），每件24瓶</p>
				<!-- <p style="position: relative;">报价结果：<input type="text" v-model="order_amount"></p> -->
			</div>
			<br><br>
			<div style="width: 120px;height: 40px;background: rgb(255,0,0);margin: 16px auto 0 auto;border-radius: 5px;text-align: center;"></div>
			<p style="height:2px;position: relative;margin: 0 auto;text-align: center;top: -36px;color: #fff;font-size: 24px;"
			 @click="submitIt()">确认下单</p>
		</div>
		<script>
			new Vue({ //渲染表格
				el: "#app",
				data: {
					chi_cun: [],
					he_xing: 0,
					chi_cun_zhi: 0,
					cai_liao: 0,
					gong_yi: [],
					shu_liang: 0,
					jie_guo: 0,
					user: {}
				},
				watch: {
					he_xing: function(va) {
						if (va == '21' || va == '45') {
							this.chi_cun = [{
								va: 1,
								name: '90X90X235'
							}, {
								va: 1.045,
								name: '100X100X240'
							}, {
								va: 1.065,
								name: '105X105X250'
							}, {
								va: 1.085,
								name: '110X110X260'
							}, {
								va: 1.1,
								name: '120X120X270'
							}]
						} else {
							this.chi_cun = [{
								va: 1,
								name: '140X290X110'
							}, {
								va: 1.02,
								name: '160X300X110'
							}, {
								va: 1.05,
								name: '170X300X120'
							}]
						}
					}
				},
				created() {
					var vm = this;
					$.post(base_path + "fengGeChaXun", {}, function(shu_ju) {
						if (shu_ju.code == 200) {
							vm.yang_shi = shu_ju.data;
						}
					})
				},
				methods: { //方法 计算
					ji_suan: function() {
						var gong_yi_zhong_jia = 1;

						this.gong_yi.forEach(function(dan_jia) {
							gong_yi_zhong_jia *= parseFloat(dan_jia);
						})
						gong_yi_zhong_jia = gong_yi_zhong_jia * parseFloat(this.he_xing) * parseFloat(this.cai_liao) * parseFloat(this
							.chi_cun_zhi) * parseFloat(this.shu_liang);
						this.jie_guo = Math.round(gong_yi_zhong_jia * 100) / 100;

					},
					submitIt() {
						$.post(base_path + "app/order/add", {
							userId: JSON.parse(localStorage.userInfo).id,
							info: JSON.stringify(this.user)
						}, function(data) {
							if (data.code == 200) {
								alert("下单成功，稍后会有工作人员与你联系！")
								location.href = "shou_ye.html";
							}
						})
					}
				}
			});
		</script>
	</body>
</html>
